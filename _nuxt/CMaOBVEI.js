import{_ as V,P as f,c as o,a as t,b as m,w as x,t as u,h as b,v,F as _,r as g,d as I,W as w,e as L,g as P,o as n,p as S,f as k}from"./Bs_HIlI6.js";import{c as C}from"./Cx_vYNU3.js";const D={name:"carFrame",data(){return{carFrame:C,breadcrumbBlands:(this._.provides[f]||this.$route).query.brand,breadcrumbModel:(this._.provides[f]||this.$route).query.model,brandList:[],car:[],types:[],modelList:[],years:[],yearList:[],brandInputValue:"",modelInputValue:"",yearInputValue:"",totalPage:5,currentPage:1,filterData:[],fiterCarFrames:[],carFrameList:[],carMediaList:[],carBlindSpotList:[],carFittingList:[]}},mounted:async function(){await this.getListData();let c=(this._.provides[f]||this.$route).query.brand,a=(this._.provides[f]||this.$route).query.model,l=(this._.provides[f]||this.$route).query.year;c&&(this.brandInputValue=c,this.modelInputValue=a,this.yearInputValue=l),this.brandChange(),this.modelChange(),this.search();let i=Math.ceil(this.carFrame.length/20);this.totalPage=i},methods:{getListData(){return new Promise(c=>{this.$axios.get("https://admin.meimai.com.tw/api/car").then(a=>{let l=a.data.car_brand,i=a.data.car;l&&(this.brandList=l),i&&(this.car=i),c()})})},increasePage(){this.currentPage>=this.totalPage||(this.currentPage++,this.changePage())},decreasePage(){this.currentPage<=1||(this.currentPage--,this.changePage())},changePage(){this.filterData=this.carFrame.slice((this.currentPage-1)*20,this.currentPage*20),window.scrollTo(0,0)},brandChange(c){c&&(this.modelInputValue="",this.yearInputValue=""),this.typeSelect=!0,this.yearSelect=!0;const a=this.carFrame.filter(i=>i.brand===this.brandInputValue),l=[];a.forEach(i=>{l.push(...i.model)}),this.types=[...new Set(l)],this.typeSelect=!1,this.breadcrumbBlands=this.brandInputValue,this.breadcrumbModel="",this.modelList=[],this.car.forEach(i=>{this.brandInputValue==i.car_brand_id&&this.modelList.push(i)})},modelChange(){const c=this.carFrame.filter(s=>s.brand===this.brandInputValue&&s.type.includes(this.modelInputValue)),a=[];c.forEach(s=>{a.push(...s.year)}),this.years=[...new Set(a)],this.yearSelect=!1,this.breadcrumbModel=this.modelInputValue,this.yearList=[];let l=0,i=0;if(this.modelInputValue==""){if(this.modelList.forEach((s,r)=>{r==0?(l=s.year_start,i=s.year_end):(s.year_start<l&&(l=s.year_start),s.year_end>i&&(i=s.year_end))}),l!=0&&i!=0){let s=+i-+l;this.yearList.push(l);for(let r=1;r<=s;r++)this.yearList.push(+l+r)}}else this.modelList.forEach(s=>{if(this.modelInputValue==s.id){let r=+s.year_end-+s.year_start;this.yearList.push(s.year_start);for(let p=1;p<=r;p++)this.yearList.push(+s.year_start+p)}})},search(){this.carFrameList=[],this.carMediaList=[],this.carBlindSpotList=[],this.carFittingList=[];let c={car_brand_id:this.brandInputValue,car_id:this.modelInputValue?this.modelInputValue:"",year:this.yearInputValue?this.yearInputValue:""};this.$axios.get("https://admin.meimai.com.tw/api/search",{params:c}).then(a=>{let l=a.data.result;l&&(l.car_frame.length>0&&(this.carFrameList=l.car_frame),l.car_media.length>0&&(this.carMediaList=l.car_media),l.car_blind_spot.length>0&&(this.carBlindSpotList=l.car_blind_spot),l.car_fitting.length>0&&(this.carFittingList=l.car_fitting),this.$router.push({path:"/searchPage",query:{brand:this.brandInputValue,model:this.modelInputValue,year:this.yearInputValue}}))})},storeLocalStorage(){localStorage.setItem("brand",this.brandInputValue),localStorage.setItem("model",this.modelInputValue),localStorage.setItem("year",this.yearInputValue)}}},h=c=>(S("data-v-6a952cdb"),c=c(),k(),c),B={class:"img_box banner"},M={class:"text-center pt-28 pb-20 md:py-14 lg:pt-44"},E={class:"hidden lg:block text-white text-2xl font-semibold mb-10"},F={class:"hover:text-yellow-400 transition-all duration-300"},q=h(()=>t("span",null," / ",-1)),N={class:"container mx-auto px-5"},U={class:"lg:grid grid-cols-10 gap-5"},A={class:"col-span-3 mb-3 lg:mb-0"},T=h(()=>t("option",{value:"",selected:""},"選擇汽車品牌",-1)),j=["value"],z={class:"col-span-3 mb-3 lg:mb-0"},J=h(()=>t("option",{value:"",selected:""},"選擇車款",-1)),O=["value"],R={class:"col-span-3 mb-3 lg:mb-0"},W=h(()=>t("option",{disabled:""},"選擇年份",-1)),Y=h(()=>t("option",{selected:"",value:""},"所有年份",-1)),G={class:"col-span-1"},H={class:"container mx-auto px-5 py-20"},K={class:"py-10 lg:py-14"},Q=h(()=>t("h2",{class:"text-2xl lg:text-3xl font-semibold py-5"},"多媒體機車框",-1)),X={class:"md:grid md:grid-cols-3 xl:grid-cols-4 gap-8"},Z=["src","alt"],$=h(()=>t("hr",{class:"mb-2"},null,-1)),tt={class:"text-xl font-semibold"},et={class:"text-xl flex items-center"},st={class:"mr-2"},at={class:"text-sm font-medium border rounded-sm border-yellow-400 px-1"},lt={class:"py-10 lg:py-14"},it=h(()=>t("h2",{class:"text-2xl lg:text-3xl font-semibold py-5"}," 安卓車用多媒體機 ",-1)),rt={class:"md:grid md:grid-cols-3 xl:grid-cols-4 gap-8"},ot=["src","alt"],nt=h(()=>t("hr",{class:"mb-2"},null,-1)),ct={class:"text-xl font-semibold"},dt={class:"py-10 md:py-14 lg:py-20"},ut=h(()=>t("h2",{class:"text-2xl lg:text-3xl font-semibold py-5"},"盲點偵測",-1)),ht={class:"md:grid md:grid-cols-3 xl:grid-cols-4 gap-8"},mt=["src","alt"],pt=h(()=>t("hr",{class:"mb-2"},null,-1)),_t={class:"text-xl font-semibold"},gt={class:"py-10 lg:py-14"},yt=h(()=>t("h2",{class:"text-2xl lg:text-3xl font-semibold py-5"},"車用配件",-1)),bt={class:"md:grid md:grid-cols-3 xl:grid-cols-4 gap-8"},ft=["src","alt"],xt=h(()=>t("hr",{class:"mb-2"},null,-1)),vt={class:"text-xl font-semibold"},wt={class:"container mx-auto px-5 py-20"},It={class:"flex justify-center"},Vt={class:"flex"};function Lt(c,a,l,i,s,r){const p=L,y=P("font-awesome-icon");return n(),o("section",null,[t("div",B,[t("div",M,[t("p",E,[t("span",F,[m(p,{to:"/"},{default:x(()=>[I("首頁")]),_:1})]),q,t("span",null,u(s.breadcrumbBlands)+" - "+u(s.breadcrumbModel),1)]),t("div",N,[t("div",U,[t("div",A,[b(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.brandInputValue=e),onChange:a[1]||(a[1]=e=>r.brandChange(!0)),class:"w-full h-12 p-3 text-black"},[T,(n(!0),o(_,null,g(s.brandList,(e,d)=>(n(),o("option",{key:d,value:e.id},u(e.name),9,j))),128))],544),[[v,s.brandInputValue]])]),t("div",z,[b(t("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>s.modelInputValue=e),onChange:a[3]||(a[3]=(...e)=>r.modelChange&&r.modelChange(...e)),class:"w-full h-12 p-3 text-black"},[J,(n(!0),o(_,null,g(s.modelList,(e,d)=>(n(),o("option",{key:d,value:e.id},u(e.name),9,O))),128))],544),[[v,s.modelInputValue]])]),t("div",R,[b(t("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>s.yearInputValue=e),class:"w-full h-12 p-3 text-black"},[W,(n(!0),o(_,null,g(s.yearList,(e,d)=>(n(),o("option",{key:d},u(e),1))),128)),Y],512),[[v,s.yearInputValue]])]),t("div",G,[t("button",{onClick:a[5]||(a[5]=(...e)=>r.search&&r.search(...e)),class:"w-full h-full text-white font-medium bg-yellow-300 hover:bg-yellow-400 transition-all duration-300 py-2"},[m(y,{class:"text-sm mr-2",icon:["fas","search"]}),I("搜尋 ")])])])])])]),t("div",H,[t("div",K,[Q,t("div",X,[(n(!0),o(_,null,g(s.carFrameList,(e,d)=>(n(),o("div",{key:d,class:"col-span-1 py-5"},[m(p,{to:"/carFrameDetail/"+e.id},{default:x(()=>[t("img",{class:"mb-3",src:JSON.parse(e.img)[0],alt:e.name},null,8,Z),$,t("h3",tt,[m(y,{class:"text-yellow-400 mr-3",icon:["fas","arrow-alt-circle-right"]}),t("i",null,u(e.brand_name)+" "+u(e.car_name)+" "+u(e.name),1)]),t("p",et,[t("span",st,u(e.year_start)+" ~ "+u(e.year_end),1),t("span",at,u(e.size)+"吋 ",1)])]),_:2},1032,["to"])]))),128))])]),t("div",lt,[it,t("div",rt,[(n(!0),o(_,null,g(s.carMediaList,(e,d)=>(n(),o("div",{key:d,class:"col-span-1 py-5"},[m(p,{to:"/multimediaDetail/"+e.id},{default:x(()=>[t("img",{class:"mb-3",src:e.img,alt:e.name},null,8,ot),nt,t("h3",ct,[m(y,{class:"text-yellow-400 mr-3",icon:["fas","arrow-alt-circle-right"]}),t("i",null,u(e.name),1)])]),_:2},1032,["to"])]))),128))])]),t("div",dt,[ut,t("div",ht,[(n(!0),o(_,null,g(s.carBlindSpotList,(e,d)=>(n(),o("div",{key:d,class:"col-span-1 py-5"},[m(p,{to:"/carBlindSpotDetail/"+e.id},{default:x(()=>[t("img",{class:"mb-3",src:e.img,alt:e.name},null,8,mt),pt,t("h3",_t,[m(y,{class:"text-yellow-400 mr-3",icon:["fas","arrow-alt-circle-right"]}),t("i",null,u(e.name),1)])]),_:2},1032,["to"])]))),128))])]),t("div",gt,[yt,t("div",bt,[(n(!0),o(_,null,g(s.carFittingList,(e,d)=>(n(),o("div",{key:d,class:"col-span-1 py-5"},[m(p,{to:"/fittingDetail/"+e.id},{default:x(()=>[t("img",{class:"mb-3",src:e.img,alt:e.name},null,8,ft),xt,t("h3",vt,[m(y,{class:"text-yellow-400 mr-3",icon:["fas","arrow-alt-circle-right"]}),t("i",null,u(e.name),1)])]),_:2},1032,["to"])]))),128))])])]),b(t("div",wt,[t("div",It,[t("ul",Vt,[b(t("li",{onClick:a[6]||(a[6]=(...e)=>r.decreasePage&&r.decreasePage(...e)),class:"bg-gray-50 hover:bg-yellow-400 text-2xl text-yellow-400 hover:text-white transition-all duration-300 cursor-pointer border px-5 py-2 mr-4"},[m(y,{icon:["fas","caret-left"]})],512),[[w,s.currentPage>1]]),t("li",null,[b(t("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>s.currentPage=e),onChange:a[8]||(a[8]=e=>r.changePage()),name:"",id:"",class:"w-20 h-12 p-3 text-black border mr-4"},[(n(!0),o(_,null,g(s.totalPage,(e,d)=>(n(),o("option",{key:d},u(e),1))),128))],544),[[v,s.currentPage]])]),b(t("li",{onClick:a[9]||(a[9]=(...e)=>r.increasePage&&r.increasePage(...e)),class:"bg-gray-50 hover:bg-yellow-400 text-2xl text-yellow-400 hover:text-white transition-all duration-300 cursor-pointer border px-5 py-2"},[m(y,{icon:["fas","caret-right"]})],512),[[w,s.currentPage<5]])])])],512),[[w,s.filterData.length>=20]])])}const kt=V(D,[["render",Lt],["__scopeId","data-v-6a952cdb"]]);export{kt as default};
